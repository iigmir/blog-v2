import{ArticleTagsApp}from"./tags-app.min.js";class LisenceElement{cc_license_link(e="BY",t="4.0"){const n=document.createElement("a");return n.target="_blank",n.href=`https://creativecommons.org/licenses/${e.toLocaleLowerCase()}/${t}/deed.en`,n.textContent=`${e.toUpperCase()} ${t}`,n}small_dom(){const e=document.createElement("small");return e.style="display: block; margin-top: 8px;",e.insertAdjacentText("beforeend","Works are licenced under "),e.insertAdjacentElement("beforeend",this.cc_license_link("BY-ND","4.0")),e.insertAdjacentText("beforeend"," unless other licences like "),e.insertAdjacentElement("beforeend",this.cc_license_link("BY-SA","4.0")),e.insertAdjacentText("beforeend"," applies over CC-BY-ND."),e}img_dom(){const e=document.createElement("img");return e.src="../api/cc-by-nd-icon.svg",e.alt="CC-BY-ND 4.0",e}img_link_dom(){const e=this.cc_license_link("BY-ND","4.0");return e.textContent="",e.appendChild(this.img_dom()),e}get main(){const e=document.createElement("div"),t=this.small_dom(),n=this.img_link_dom();return e.setAttribute("class","lisence"),e.appendChild(n),e.appendChild(t),e}}class ResolvedElements{constructor(e={matched_tags:[],ajax_data:{}}){this.ajax_data=e.ajax_data,this.matched_tags=e.matched_tags}get tags_list_dom(){const e=document.createElement("ul");return e.classList.add("badges"),e.classList.add("-round"),this.matched_tags.map((e=>{const t=document.createElement("li");return t.classList.add("item"),t.classList.add("click-icon"),t.textContent=e,t})).forEach((t=>e.appendChild(t))),e}get help_dom(){const e=document.createElement("p");return e.textContent="Tags: ",e}generate_date_component(e="",t="",n=""){const a=(new Intl.DateTimeFormat).resolvedOptions().timeZone,s=document.createElement("i-date");return s.dataset.title=e,s.dataset.date=n,s.dataset.classes=t,s.dataset.timezone=a,s}get date_doms(){return{created:this.generate_date_component("Created: ","date -created",this.ajax_data.created_at),updated:this.generate_date_component("Updated: ","date -updated",this.ajax_data.updated_at)}}get date_components(){const e=document.createElement("div");return e.classList.add("i-date-component"),e.appendChild(this.date_doms.created),e.appendChild(this.gap_dom),e.appendChild(this.date_doms.updated),e}get gap_dom(){const e=document.createElement("span");return e.textContent="; ",e}get lisence_dom(){return(new LisenceElement).main}get hr_gap_dom(){return document.createElement("hr")}get wrapper(){const e=document.createElement("footer");return e.setAttribute("class","tags container"),e.appendChild(this.hr_gap_dom),e.appendChild(this.date_components),e.appendChild(this.help_dom),e.appendChild(this.tags_list_dom),e.appendChild(this.lisence_dom),e}}class RejectedElements{constructor(e){console.error(e),this.error_message=e}get error_reminder(){const e=document.createElement("span");return e.textContent="Oh-oh. Something's up. :-(",e.dataset.errorMessage=this.error_message,e}get lisence_dom(){return(new LisenceElement).main}get wrapper(){const e=document.createElement("footer");return e.setAttribute("class","tags container"),e.appendChild(this.error_reminder),e.appendChild(this.lisence_dom),e}}class ArticleTagsAppELement extends HTMLElement{tags_object=null;constructor(){super()}connectedCallback(){this.tags_object=new ArticleTagsApp,this.tagsapp_action()}tagsapp_action(){this.tags_object.set_id(),this.tags_object.request_api().then((e=>{this.render_given_element(ResolvedElements,this.tags_object)})).catch((e=>{this.render_given_element(RejectedElements,e)}))}get article_css_loader(){const e=document.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href","../css/new-framework.min.css"),e}render_given_element(e,t){const n=this.attachShadow({mode:"open"}),a=new e(t);n.appendChild(this.article_css_loader),n.appendChild(a.wrapper)}}export{ArticleTagsAppELement};